{% extends is_sub_request ? 'subrequest.html.twig' : 'base.html.twig' %}

{% block body %}

<table class="table-striped table-condensed sortable xt-table">
    <thead>
        <tr>
            <th>{{ msg('ec-latestglobal-time') }}</th>
            <th>{{ msg('ec-latestglobal-project') }}</th>
            <th>{{ msg('ec-latestglobal-actions') }}</th>
            <th>{{ msg('ec-latestglobal-page') }}</th>
            <th>{{ msg('ec-latestglobal-comment') }}</th>
        </tr>
    </thead>
    <tbody>
    {% for rev in ec.globalEdits(40) %}
        <tr>
            <td class="tddate">{{ rev.timestamp|date('Y-m-d H:i') }}</td>
            <td class="tdgeneral"><a href="{{ rev.project.url }}">{{ rev.project.title }}</a></td>
            <td class="text-nowrap">(
                {{ diff_link(rev.rev_id, rev.project.url, 'diff') }}
                &middot; {{ user_log_link(user.username, rev.project.url, 'log') }}
                &middot;
                <a href="{{ path('TopEditsResults', {project:rev.project.databaseName, username:user.username, namespace:rev.page_namespace, article:rev.page_title}) }}">
                    topedits
                </a>
                )
            </td>
            <td class="tdgeneral">
                {% if rev.page_namespace != 0 %}
                    {% set qualified_name = attribute(rev.project.namespaces, rev.page_namespace)~':'~rev.page_title %}
                {% else %}
                    {% set qualified_name = rev.page_title %}
                {% endif %}
                {{ wiki_link(qualified_name, rev.project.url) }}
            </td>
            <td class="tdrevtext">{{ rev.rev_comment }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

{% endblock %}
